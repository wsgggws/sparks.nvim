# Sparks.nvim

Neovim æ’ä»¶ï¼šæå…·æ‰“å‡»æ„Ÿçš„è¾“å…¥åŠ¨ç”»ç‰¹æ•ˆç³»ç»Ÿã€‚

**ğŸ‰ ç²’å­ç‰©ç†å¼•æ“ | ğŸ”¥ Combo è¿å‡»ç³»ç»Ÿ | ğŸ”Š æ²‰æµ¸å¼éŸ³æ•ˆ | ğŸŒˆ åŸºäº Treesitter çš„æ™ºèƒ½ç€è‰²**

> "å†™ä»£ç ä»æœªå¦‚æ­¤å¸¦æ„Ÿï¼"

## âœ¨ ç‰¹æ€§

- **âš›ï¸ ç‰©ç†ç²’å­ç³»ç»Ÿ**ï¼šåŸºäºé‡åŠ›ã€é˜»åŠ›å’Œåˆé€Ÿåº¦çš„å®æ—¶ç²’å­æ¨¡æ‹Ÿï¼Œæ‹’ç»å‘†æ¿çš„é¢„åˆ¶åŠ¨ç”»ã€‚
- **ğŸ”¥ Combo è¿å‡»ç³»ç»Ÿ**ï¼š
  - è¿ç»­è¾“å…¥ç§¯ç´¯çƒ­åº¦ï¼Œè§¦å‘ `x10` è¿å‡»æ˜¾ç¤ºã€‚
  - **çƒ­åº¦å‡çº§**ï¼šè¿å‡»æ•°è¶Šé«˜ï¼Œç‰¹æ•ˆè¶Šç‚«é…·ï¼ˆå½©è™¹æ¨¡å¼ ğŸŒˆ -> ç«ç„°æ¨¡å¼ ğŸ”¥ï¼‰ã€‚
- **ğŸ¨ æ™ºèƒ½ç€è‰²**ï¼šåˆ©ç”¨ Treesitter è‡ªåŠ¨è¯†åˆ«å½“å‰è¯­æ³•çš„é¢œè‰²ï¼Œè®©çƒŸèŠ±ä¸ä»£ç èä¸ºä¸€ä½“ã€‚
- **ğŸ’¥ å±å¹•éœ‡åŠ¨**ï¼šé«˜èƒ½æ—¶åˆ»è§¦å‘å±å¹•éœ‡åŠ¨ï¼Œæ‰“å‡»æ„Ÿæ‹‰æ»¡ï¼ˆå¯é€‰ï¼‰ã€‚
- **ğŸ­ å¤šç§åŠ¨ç”»é¢„è®¾**ï¼š
  - `confetti` (å½©å¸¦) - é»˜è®¤è¾“å…¥
  - `explode` (çˆ†ç‚¸) - åˆ é™¤å­—ç¬¦
  - `matrix` (é»‘å®¢å¸å›½) - ç»¿è‰²ä»£ç é›¨
  - `snow` (é£é›ª) - èˆ’ç¼“é£˜è½
- **ğŸ”Š æ²‰æµ¸éŸ³æ•ˆ**ï¼šé€šè¿‡ `sound_pack` ä¸€é”®åˆ‡æ¢éŸ³æ•ˆä¸»é¢˜ï¼ˆæœºæ¢°é”®ç›˜ã€ç§‘å¹»ç­‰ï¼‰ã€‚
- **âš¡ æè‡´æ€§èƒ½**ï¼š
  - **âœ¨ è§†è§‰æ·¡å‡º**ï¼šç²’å­ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ä¼šé€æ¸ç¼©å°å˜æ·¡ï¼Œç»†èŠ‚æ„Ÿæ‹‰æ»¡ã€‚
  - **ğŸ›¡ï¸ æ™ºèƒ½å±è”½**ï¼šè‡ªåŠ¨åœ¨ Telescopeã€NvimTreeã€Terminal ç­‰çª—å£ç¦ç”¨ï¼Œä¸“æ³¨æ ¸å¿ƒç¼–è¾‘ã€‚
  - **ğŸ§© æ™ºèƒ½å¤ç”¨**ï¼šå¤ç”¨çª—å£ã€Paste æ¨¡å¼æ£€æµ‹ã€å®å½•åˆ¶æ£€æµ‹ï¼Œé›¶å¹²æ‰°ã€‚

## ğŸ“¦ å®‰è£…

### LazyVim / lazy.nvim

```lua
{
  "wsgggws/sparks.nvim",
  event = "VeryLazy",
  opts = {
    -- ğŸš€ é»˜è®¤å·²å¯ç”¨æ‰€æœ‰æœ€ä½³é…ç½®
  },
}
```

## âš™ï¸ é…ç½®æ‰‹å†Œ

```lua
require("sparks").setup({
  -- åŸºç¡€å¼€å…³
  enabled = true,
  position = "top-right", -- åŠ¨ç”»æ˜¾ç¤ºä½ç½®

  -- ğŸš€ ç‰©ç†ç²’å­ç³»ç»Ÿé…ç½®
  animation_fps = 30,     -- å¸§ç‡ (å»ºè®® 30-60)

  -- ğŸ”¥ Combo ç³»ç»Ÿ
  enable_combo = true,
  combo_threshold = 5,    -- å¤šå°‘è¿å‡»å¼€å§‹æ˜¾ç¤ºè®¡æ•°
  combo_timeout = 2000,   -- è¿å‡»æ–­å¼€æ—¶é—´(ms)

  -- çƒ­åº¦æ˜ å°„ï¼šè¿å‡»æ•° -> ç‰¹æ•ˆæ¨¡å¼
  heat_map = {
    [10] = "rainbow", -- >10 è¿å‡»ï¼šä¸ƒå½©ç²’å­
    [20] = "fire",    -- >20 è¿å‡»ï¼šç«ç„°å‡è…¾
  },

  -- ğŸ«¨ æ‰“å‡»æ„Ÿ
  enable_shake = true,    -- è¿å‡»çˆ†å‘æ—¶çª—å£éœ‡åŠ¨

  -- âŒ¨ï¸ é«˜çº§è§¦å‘å™¨ (æŒ‰é”® -> åŠ¨ç”»ç±»å‹)
  triggers = {
    ["{"] = "explode",   -- çˆ†ç‚¸
    ["("] = "confetti",  -- å½©å¸¦
    ["!"] = "explode",   -- çˆ†ç‚¸
    ["*"] = "snow",      -- é›ªèŠ±
    ["^"] = "fire",      -- ç«ç„°
    ["}"] = "matrix",    -- é»‘å®¢å¸å›½
  },

  -- ğŸ”Š å£°éŸ³é…ç½®
  enable_sound = true,    -- å¯ç”¨å£°éŸ³
  sound_volume = 3.0,     -- éŸ³é‡ (0.0 - 5.0)
  sound_pack = "default", -- default, mechanical, sci-fi

  -- ğŸ›¡ï¸ æ™ºèƒ½å±è”½ (åˆ—è¡¨ä¸­çš„çª—å£ä¸è§¦å‘åŠ¨ç”»)
  excluded_filetypes = {
    "TelescopePrompt",
    "NvimTree",
    "neo-tree",
    "lazy",
    "mason",
  },
  excluded_buftypes = { "nofile", "terminal", "prompt" },
})
```

## ğŸ® å‘½ä»¤

- `:SparksToggle` - åˆ‡æ¢æ’ä»¶å¼€å…³
- `:SparksTest` - æµ‹è¯•åŠ¨ç”»æ•ˆæœ

## ğŸ¬ åŠ¨ç”»é£æ ¼

æ’ä»¶æ”¯æŒ 5 ç§åŠ¨ç”»é£æ ¼ï¼š

1. **bounce** (é»˜è®¤) - å¼¹è·³æ•ˆæœï¼Œæ–‡å­—ä¸Šä¸‹è·³åŠ¨
2. **fade** - æ·¡å…¥æ•ˆæœï¼Œæ–‡å­—é€æ¸æ˜¾ç°
3. **slide** - æ»‘å…¥æ•ˆæœï¼Œæ–‡å­—ä»å³ä¾§æ»‘å…¥
4. **wave** - æ³¢æµªæ•ˆæœï¼Œæ–‡å­—å·¦å³æ³¢åŠ¨
5. **spin** - æ—‹è½¬æ•ˆæœï¼Œå¸¦æ—‹è½¬åŠ è½½å™¨

è®¾ç½® `animation_fps = 0` å¯ä»¥ç¦ç”¨åŠ¨ç”»ï¼Œåªæ˜¾ç¤ºé™æ€æ–‡æœ¬ã€‚

## ğŸ”Š å£°éŸ³æ•ˆæœ

### è·¨å¹³å°æ”¯æŒ

æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå¹¶ä½¿ç”¨ç›¸åº”çš„éŸ³é¢‘æ’­æ”¾æ–¹å¼ï¼š

- **ğŸ macOS**: ä½¿ç”¨ `afplay` æ’­æ”¾ç³»ç»ŸéŸ³æ•ˆæˆ–è‡ªå®šä¹‰ .aiff æ–‡ä»¶
- **ğŸ§ Linux**: è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ `paplay` (PulseAudio)ã€`aplay` (ALSA) æˆ– `ffplay`
- **ğŸªŸ Windows**: ä½¿ç”¨ PowerShell çš„ Media.SoundPlayer æ’­æ”¾ .wav æ–‡ä»¶

### ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å£°éŸ³

```lua
opts = {
  enable_sound = true,      -- å¯ç”¨å£°éŸ³
  sound_on_insert = true,   -- è¾“å…¥æ—¶æ’­æ”¾
  sound_on_delete = true,   -- åˆ é™¤æ—¶æ’­æ”¾
  sound_volume = 0.6,       -- éŸ³é‡ 60%
  -- ä¸é…ç½® sound_file_insert/deleteï¼Œå°†ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å£°éŸ³
}
```

### è‡ªå®šä¹‰å£°éŸ³æ–‡ä»¶ï¼ˆæ¨è macOS ç”¨æˆ·ï¼‰

```lua
opts = {
  enable_sound = true,
  sound_volume = 0.8,
  -- è¾“å…¥æ—¶éšæœºä»è¿™äº›å£°éŸ³ä¸­é€‰æ‹©ä¸€ä¸ª
  sound_file_insert = {
    "/System/Library/Sounds/Pop.aiff",
    "/System/Library/Sounds/Hero.aiff",
    "/System/Library/Sounds/Funk.aiff",
  },
  -- åˆ é™¤æ—¶éšæœºä»è¿™äº›å£°éŸ³ä¸­é€‰æ‹©ä¸€ä¸ª
  sound_file_delete = {
    "/System/Library/Sounds/Bottle.aiff",
    "/System/Library/Sounds/Glass.aiff",
  },
}
```

### Windows ç”¨æˆ·é…ç½®ç¤ºä¾‹

```lua
opts = {
  enable_sound = true,
  sound_file_insert = { "C:\\Windows\\Media\\Windows Ding.wav" },
  sound_file_delete = { "C:\\Windows\\Media\\Windows Error.wav" },
}
```

### Linux ç”¨æˆ·é…ç½®ç¤ºä¾‹

```lua
opts = {
  enable_sound = true,
  -- ä½¿ç”¨ freedesktop éŸ³æ•ˆæˆ–è‡ªå·±çš„éŸ³é¢‘æ–‡ä»¶
  sound_file_insert = { "/usr/share/sounds/freedesktop/stereo/message.oga" },
  sound_file_delete = { "/usr/share/sounds/freedesktop/stereo/bell.oga" },
}
```

**æ³¨æ„**:

- å£°éŸ³é»˜è®¤å…³é—­ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® `enable_sound = true`
- å¦‚æœä¸é…ç½®å£°éŸ³æ–‡ä»¶ï¼Œå°†è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿé»˜è®¤éŸ³æ•ˆ
- æ”¯æŒå¤šä¸ªå£°éŸ³æ–‡ä»¶ï¼Œæ¯æ¬¡éšæœºæ’­æ”¾å¢åŠ è¶£å‘³æ€§
- å»ºè®®æˆ´è€³æœºä½¿ç”¨ï¼ŒéŸ³é‡ä¸å®œè¿‡å¤§

## ğŸ¨ è‡ªå®šä¹‰æ ·å¼

åŠ¨ç”»ä½¿ç”¨çš„é«˜äº®ç»„ï¼š

- è¾“å…¥ï¼š`String`
- åˆ é™¤ï¼š`WarningMsg`

å¯é€šè¿‡è®¾ç½®è¿™äº›é«˜äº®ç»„æ¥è‡ªå®šä¹‰é¢œè‰²ã€‚

## ğŸš€ æ€§èƒ½

- ä½¿ç”¨èŠ‚æµæœºåˆ¶é¿å…é¢‘ç¹è§¦å‘
- å¼‚æ­¥çª—å£ç®¡ç†ï¼Œä¸é˜»å¡ç¼–è¾‘
- è‡ªåŠ¨æ¸…ç†èµ„æº

## ğŸ“„ License

MIT
